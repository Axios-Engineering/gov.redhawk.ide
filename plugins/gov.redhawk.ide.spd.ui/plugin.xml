<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<!--
	This file is protected by Copyright. Please refer to the COPYRIGHT file distributed with this 
	source distribution.

	This file is part of REDHAWK IDE.
	
	All rights reserved.  This program and the accompanying materials are made available under 
	the terms of the Eclipse Public License v1.0 which accompanies this distribution, and is available at 
	http://www.eclipse.org/legal/epl-v10.html
-->
<plugin>
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            canFinishEarly="false"
            category="gov.redhawk.ide.ui.wizards.category.sca"
            class="gov.redhawk.ide.spd.ui.wizard.NewScaResourceProjectWizard"
            descriptionImage="icons/etool16/newprj_wiz.gif"
            hasPages="true"
            icon="icons/etool16/newprj_wiz.gif"
            id="gov.redhawk.ide.ui.wizards.newcomponent"
            name="SCA Component Project"
            project="true">
      </wizard>
      <primaryWizard
            id="gov.redhawk.ide.ui.wizards.newcomponent">
      </primaryWizard>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="gov.redhawk.ide.spd.internal.ui.editor.ComponentEditor"
            contributorClass="gov.redhawk.ide.spd.internal.ui.editor.ComponentEditorActionBarContributor"
            default="true"
            icon="icons/obj16/SpdModelFile.gif"
            id="gov.redhawk.ide.ui.editors.ComponentEditor"
            name="SCA Component Editor">
         <contentTypeBinding
               contentTypeId="mil.jpeojtrs.sca.spd.content-type">
         </contentTypeBinding>
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.ide.markerResolution">
      <markerResolutionGenerator
            class="gov.redhawk.ide.spd.internal.ui.MarkerResolutionGenerator">
      </markerResolutionGenerator>
   </extension>
    <extension
       point="gov.redhawk.sca.ui.scaContentTypes">
    <contentType
          id="gov.redhawk.ide.spd.contentType"
          name="SPD Content Type"
          priority="LOWEST">
       <describer
             class="gov.redhawk.sca.ui.editors.ScaObjectWrapperContentDescriber"
             plugin="gov.redhawk.sca.ui">
          <parameter
                name="profileFilename"
                value=".*spd.xml">
          </parameter>
       </describer>
    </contentType>
    <contentTypeBinding
          contentTypeId="gov.redhawk.ide.spd.contentType"
          editorId="gov.redhawk.ide.ui.editors.ComponentEditor"
          priority="LOWEST">
    </contentTypeBinding>
    <contentTypeBinding
          contentTypeId="mil.jpeojtrs.sca.spd.contentType"
          editorId="gov.redhawk.ide.ui.editors.ComponentEditor"
          priority="LOWEST">
    </contentTypeBinding>
 </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="Organize the Interfaces for this Component"
            id="gov.redhawk.ide.spd.ui.command.organizeinterfaces"
            name="Organize Interfaces">
      </command>
      <command
            description="Removes the Selected Ports"
            id="gov.redhawk.ide.spd.ui.command.removePorts"
            name="Remove">
      </command>
      <command
            description="Adds a New Port"
            id="gov.redhawk.ide.spd.ui.command.addPort"
            name="Add...">
      </command>
      <command
            description="Edits a Port"
            id="gov.redhawk.ide.spd.ui.command.editPort"
            name="Edit">
      </command>
      <command
            description="Recreates the Implementation Settings"
            id="gov.redhawk.ide.spd.ui.command.recreateSettings"
            name="Recreate Settings">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.OrganizeInterfacesHandler"
            commandId="gov.redhawk.ide.spd.ui.command.organizeinterfaces">
         <activeWhen>
            <iterate
                  ifEmpty="false">
               <or>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.name"
                           value="*.scd.xml">
                     </test>
                  </adapt>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.name"
                           value="*.spd.xml">
                     </test>
                  </adapt>
               </or>
            </iterate>
         </activeWhen>
      </handler>
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.RemovePortsHandler"
            commandId="gov.redhawk.ide.spd.ui.command.removePorts">
         <activeWhen>
            <iterate
                  ifEmpty="false">
               <or>
                  <instanceof
                        value="org.eclipse.emf.edit.provider.IWrapperItemProvider">
                  </instanceof>
               </or>
            </iterate>
         </activeWhen>
      </handler>
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.AddPortHandler"
            commandId="gov.redhawk.ide.spd.ui.command.addPort">
      </handler>
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.EditPortHandler"
            commandId="gov.redhawk.ide.spd.ui.command.editPort">
         <activeWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="org.eclipse.emf.edit.provider.IWrapperItemProvider">
                  </instanceof>
               </iterate>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="gov.redhawk.ide.spd.internal.ui.handlers.RecreateSettingsHandler"
            commandId="gov.redhawk.ide.spd.ui.command.recreateSettings">
         <activeWhen>
            <iterate
                  ifEmpty="false">
               <adapt
                     type="org.eclipse.core.resources.IResource">
                  <test
                        property="org.eclipse.core.resources.name"
                        value="*.spd.xml">
                  </test>
               </adapt>
            </iterate>
         </activeWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="gov.redhawk.ide.spd.ui.command.organizeinterfaces"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate>
	               <or>
	                 <adapt
	                       type="org.eclipse.core.resources.IResource">
	                    <test
	                          property="org.eclipse.core.resources.name"
	                          value="*.spd.xml">
	                    </test>
	                 </adapt>
	                 <adapt
	                       type="org.eclipse.core.resources.IResource">
	                    <test
	                          property="org.eclipse.core.resources.name"
	                          value="*.scd.xml">
	                    </test>
	                 </adapt>
                 </or>
               </iterate>
            </visibleWhen>
         </command>
         <command
               commandId="gov.redhawk.ide.spd.ui.command.recreateSettings"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <iterate>
                  <adapt
                        type="org.eclipse.core.resources.IResource">
                     <test
                           property="org.eclipse.core.resources.name"
                           value="*.spd.xml">
                     </test>
                  </adapt>
               </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
    <extension
          point="org.eclipse.core.runtime.preferences">
       <initializer
             class="gov.redhawk.ide.spd.ui.ComponentUiPreferenceInitializer">
       </initializer>
    </extension>
    <extension
          point="org.eclipse.ui.decorators">
       <decorator
             class="gov.redhawk.ide.spd.internal.ui.editor.provider.PrimaryImplementationDecorator"
             id="gov.redhawk.ide.spd.ui.editor.provider.PrimaryImplementationDecorator"
             label="Primary Implementation Decorator"
             lightweight="true"
             state="true">
          <enablement>
             <objectClass
                   name="mil.jpeojtrs.sca.spd.Implementation">
             </objectClass>
          </enablement>
       </decorator>
    </extension>
</plugin>
